
extends ../layout

block content
  .container
    h1.text-center Ver Curso
    hr

    .form-group
      label.col-sm-3.control-label(for='name') Titulo 
      .col-sm-7
        input.form-control(type='text', name='title', id='name', value=curso.title readonly)
    .form-group
      label.col-sm-3.control-label(for='name') E.A.P
      .col-sm-7
        if curso.eap == 1
          input.form-control(type='text', name='eap', id='name', value='Ingeniería de Sistemas' readonly)   
        else
          input.form-control(type='text', name='eap', id='name', value='Ingeniería de Software' readonly)      
    .form-group
      label.col-sm-3.control-label(for='email') Ciclo
      .col-sm-7
        input.form-control(type='text', name='cycke', id='email', value=curso.cycle readonly)
    .form-group 
      label.col-sm-3.control-label(for='email') Descripcion
      .col-sm-7
        textarea#exampleFormControlTextarea1.form-control(rows='3' name='description' disabled) #{curso.description}
    .form-group
      label.col-sm-3.control-label Imagen del curso
      .col-sm-4
        img(src=curso.image, class='profile', width='100', height='100')
    .form-group
      label.col-sm-3.control-label(for='email') Profesor asignado
      - var profe = curso.idTeacher.names +' '+ curso.idTeacher.surnames
      .col-sm-7
        input.form-control(type='text', name='cycke', id='email', value=profe readonly)
    br
    br
    .page-header
      h3 Lista de Grupos
      br
      each grupo, index in grupos
        h4 Grupo #{index + 1}
        // Button trigger modal
        if matricula
          if matricula.idCourse = curso._id
            h5 Ya esta matriculado 
          else
            button.btn.btn-success(type='button', data-toggle='modal', data-target='#exampleModalCenter'+grupo._id)
              | Matricularse
            // Modal
            .modal.fade(id='exampleModalCenter'+grupo._id tabindex='-1', role='dialog', aria-labelledby='exampleModalCenterTitle', aria-hidden='true')
              .modal-dialog.modal-dialog-centered(role='document')
                .modal-content
                  .modal-header
                    h5#exampleModalCenterTitle.modal-title Descripción de la Matricula
                    button.close(type='button', data-dismiss='modal', aria-label='Close')
                      span(aria-hidden='true') ×
                  .modal-body
                    | Curso: #{curso.title}
                    br
                    | Profesor: #{profe}
                    br
                    | Grupo: #{grupo.title}
                  .modal-footer
                    button.btn.btn-danger(type='button', data-dismiss='modal') Cancelar
                    a.btn.btn-primary(href=`/alumno/cursos/${curso._id}/grupos/${grupo._id}/matricularse`, role='button') Confirmar Matricula
        else
          button.btn.btn-success(type='button', data-toggle='modal', data-target='#exampleModalCenter'+grupo._id)
              | Matricularse
          // Modal
          .modal.fade(id='exampleModalCenter'+grupo._id tabindex='-1', role='dialog', aria-labelledby='exampleModalCenterTitle', aria-hidden='true')
            .modal-dialog.modal-dialog-centered(role='document')
              .modal-content
                .modal-header
                  h5#exampleModalCenterTitle.modal-title Descripción de la Matricula
                  button.close(type='button', data-dismiss='modal', aria-label='Close')
                    span(aria-hidden='true') ×
                .modal-body
                  | Curso: #{curso.title}
                  br
                  | Profesor: #{profe}
                  br
                  | Grupo: #{grupo.title}
                .modal-footer
                  button.btn.btn-danger(type='button', data-dismiss='modal') Cancelar
                  a.btn.btn-primary(href=`/alumno/cursos/${curso._id}/grupos/${grupo._id}/matricularse`, role='button') Confirmar Matricula
        .form-group
          label.col-sm-3.control-label(for='name') Titulo 
          .col-sm-7
            input.form-control(type='text', name='title', id='name', value=grupo.title readonly)
        .form-group
          label.col-sm-3.control-label(for='name') Descripción 
          .col-sm-7
            textarea#exampleFormControlTextarea1.form-control(rows='3' name='description' disabled) #{grupo.description}
        .form-group    
          .label.col-sm-3.control-label(for='name') Lista de Alumnos
          .table-responsive.tamTabla
            table.table.table-striped.table-hover
              thead.bg-primary
                tr
                  th(scope='col') #
                  th(scope='col') Nombres
                  th(scope='col') Apellidos
                  th(scope='col') Foto de Perfil
                  th(scope='col') Perfil de aprendizaje - puntaje
              tbody
                each alumno, index in grupo.students
                  tr
                    th(scope='row') #{index + 1}
                    td #{alumno.names}
                    td #{alumno.surnames}
                    td 
                      img.img-responsive(src=alumno.profile.photo, class='profile', width='100', height='100')
                    td ...